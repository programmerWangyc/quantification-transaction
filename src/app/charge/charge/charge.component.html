<app-payment-indicator [processing]="processing" [start]="start" [payMethodState]="payMethodSelected"></app-payment-indicator>

<div nz-row [nzAlign]="'middle'">
    <div nz-col [nzSpan]="16">
        <form [formGroup]="form" nz-form>
            <nz-form-item>
                <nz-form-label [nzSm]="labelSm" [nzXs]="xs" nzRequired>{{'RECHARGE_AMOUNT' | translate}}</nz-form-label>
                <nz-form-control [nzSm]="controlSm" [nzXs]="xs">
                    <nz-input-number formControlName="charge" required [nzMax]="100000" [nzMin]="1"></nz-input-number>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSm]="labelSm" [nzXs]="xs" nzRequired>{{'PAYMENT_METHOD' | translate}}</nz-form-label>
                <nz-form-control [nzSm]="controlSm" [nzXs]="xs">
                    <nz-select formControlName="payMethod" [nzPlaceHolder]="'SELECT_PAYMENT_METHOD' | translate" required>
                        <nz-option *ngFor="let item of payMethods" [nzLabel]="item.name | translate" [nzValue]="item.id"></nz-option>
                    </nz-select>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-control [nzXs]="{span:24,offset:0}" [nzSm]="{span:14,offset:6}" class="pay-btn">
                    <button nz-button [nzSize]="'large'" [nzType]="'primary'" [disabled]="form.invalid || payMethod.value === 1" (click)="pay$.next(form.value)">
                        {{'CONFIRM_PAY_ACTION' | translate}}
                    </button>
                    <span *ngIf="payMethod.value === 1 && charge.valid" class="scan-tip">{{'SCAN_QR_CODE_TO_PAY' | translate}}</span>
                </nz-form-control>
            </nz-form-item>
        </form>
    </div>

    <div *ngIf="payMethod.value === 1 && charge.valid" nz-col [nzSpan]="6" class="qr-code">
        <qr-code [value]="wechatQRCode | async" [size]="150"></qr-code>
    </div>
</div>
